(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ccba323"],{"08dd":function(e,t,a){"use strict";var s=a("d9b3"),l=a.n(s);l.a},"7ab5":function(e){e.exports={}},8240:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABvUlEQVRYR+2X0VnCQBCE/61AqECsQKxArECoQKxALw0IDSRYgViBUIGhArEC7cBQwfrd5ZJcJPAWfMm+EJLc7ezcziyIJvSAN2DEaWMF3IsmvP9D8rxUZW0B6GkLr2frAHQMdAw0M6BsENJSMMoI4fqPXOfB96c9KYd7NK93Sw4dwUQM1qlyv0gYe7cs84hBgudNXjIXw8yvt5/7IBsBKDuJnD3XQmMyhLPiZpsA1hIx1oQpcAe8imGpMSuE2/YB2AGRJ0zduSsbiRh5QC+nANAXQxbOCEu3n5o/7QKoqrWj2U7JIm7EkJas2OZpqQmNGBaHpqMmPAKJk09LAC7E8H0EwAD4ageA8ikRQ6/bAcp57hTsxLAtNR+zRbisMWAVQk26PYRV4ANj1LFXhTe2yoiUZ4nylzRmiTgJFlGZSswC4QFwfdHEliaMUGZWPUfYdOYVOuFVUakm2G4PzSgTQ9+zY1n6AFfh5CCAvInLPf++V6isAJChzm5tDBCWexvnFOZHISXlKequyyPy64aIa+YMWKDuub0Oj8Cx143jjoGOgY4BCUfsIdts7b7/c9pzbrb/q7e1vG5jZY0w/QUaAA9S9beM1QAAAABJRU5ErkJggg=="},a7d9:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.saleShow?a("div",[e._m(0),a("div",{staticClass:"addJd"},[a("div",{staticStyle:{"margin-bottom":"15px"}},[a("el-button",{attrs:{type:"primary",round:"",autofocus:"",plain:""},on:{click:e.addTime}},[e._v("\n        添加时间\n        "),a("i",{staticClass:"el-icon-bottom"})]),a("el-button",{attrs:{type:"primary",round:"",plain:""},on:{click:e.followTiem}},[e._v("\n        跟进时间\n        "),a("i",{staticClass:"el-icon-bottom"})]),a("el-button",{attrs:{type:"primary",round:"",plain:""},on:{click:e.customerType}},[e._v("\n        客户类型\n        "),a("i",{staticClass:"el-icon-info"})])],1),a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"提交客户","inactive-text":"全部客户"},on:{change:e.switchV},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),a("div",{staticStyle:{"margin-bottom":"15px"}},[a("el-button",{attrs:{type:"warning",round:""},on:{click:e.addUser}},[e._v("新增客户")]),a("el-button",{attrs:{type:"danger",round:""},on:{click:e.release}},[e._v("释放用户（"+e._s(e.userNum)+"）")])],1)],1),5==e.user_type||7==e.user_type?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingSale,expression:"loadingSale"}],staticStyle:{width:"61%","margin-bottom":"15px"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("span",[e._v("筛选销售人员：")]),e._l(e.saleNamer,function(t,s){return a("el-radio-group",{key:s,attrs:{size:"medium"},on:{change:function(a){return e.radioGrou(t.id)}},model:{value:e.radioSa,callback:function(t){e.radioSa=t},expression:"radioSa"}},[a("el-radio-button",{attrs:{label:t.user_name}})],1)})],2):e._e(),a("el-dialog",{attrs:{title:"新增用户",visible:e.addUse,width:"46%",center:"","before-close":e.addUseClose},on:{"update:visible":function(t){e.addUse=t}}},[a("div",{staticClass:"modify"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-check",round:""},on:{click:function(t){return e.userClick("ruleFormS","ruleForm")}}},[e._v("保存")])],1),a("el-form",{ref:"ruleFormS",staticClass:"demo-table-expand formBottom",attrs:{"label-position":"left",inline:"",model:e.addUserDate,rules:e.ruless}},[a("el-form-item",{attrs:{label:"所属公司：",prop:"company_name"}},[a("el-input",{attrs:{placeholder:"请输入所属公司"},model:{value:e.addUserDate.company_name,callback:function(t){e.$set(e.addUserDate,"company_name",t)},expression:"addUserDate.company_name"}})],1),a("el-form-item",{attrs:{label:"所属城市：",prop:"company_city"}},[a("el-input",{attrs:{placeholder:"请输入所属城市:XX市"},model:{value:e.addUserDate.company_city,callback:function(t){e.$set(e.addUserDate,"company_city",t)},expression:"addUserDate.company_city"}})],1),a("el-form-item",{attrs:{label:"公司地址："}},[a("el-input",{attrs:{placeholder:"请输入公司地址"},model:{value:e.addUserDate.company_address,callback:function(t){e.$set(e.addUserDate,"company_address",t)},expression:"addUserDate.company_address"}})],1),a("el-form-item",{attrs:{label:"公司职位：",prop:"contacts_title"}},[a("el-input",{attrs:{placeholder:"请输入公司职位"},model:{value:e.addUserDate.contacts_title,callback:function(t){e.$set(e.addUserDate,"contacts_title",t)},expression:"addUserDate.contacts_title"}})],1),a("el-form-item",{attrs:{label:"客户姓名：",prop:"contacts"}},[a("el-input",{attrs:{placeholder:"请输入客户姓名"},model:{value:e.addUserDate.contacts,callback:function(t){e.$set(e.addUserDate,"contacts",t)},expression:"addUserDate.contacts"}})],1),a("el-form-item",{attrs:{label:"联系电话：",prop:"contacts_phone"}},[a("el-input",{attrs:{placeholder:"请输入联系电话"},model:{value:e.addUserDate.contacts_phone,callback:function(t){e.$set(e.addUserDate,"contacts_phone",t)},expression:"addUserDate.contacts_phone"}})],1),a("el-form-item",{attrs:{label:"联系邮箱："}},[a("el-input",{attrs:{placeholder:"请输入联系邮箱"},model:{value:e.addUserDate.company_email,callback:function(t){e.$set(e.addUserDate,"company_email",t)},expression:"addUserDate.company_email"}})],1),a("el-form-item",{attrs:{label:"联系-QQ："}},[a("el-input",{attrs:{placeholder:"请输入联系QQ"},model:{value:e.addUserDate.qq_id,callback:function(t){e.$set(e.addUserDate,"qq_id",t)},expression:"addUserDate.qq_id"}})],1),a("el-form-item",{attrs:{label:"联系微信："}},[a("el-input",{attrs:{placeholder:"请输入联系微信"},model:{value:e.addUserDate.wx_id,callback:function(t){e.$set(e.addUserDate,"wx_id",t)},expression:"addUserDate.wx_id"}})],1),a("el-form-item",{attrs:{label:"客户行业：",prop:"company_industry"}},[a("el-input",{attrs:{placeholder:"请输入客户行业"},model:{value:e.addUserDate.company_industry,callback:function(t){e.$set(e.addUserDate,"company_industry",t)},expression:"addUserDate.company_industry"}})],1),a("el-form-item",{attrs:{label:"客户来源：",prop:"source_from"}},[a("el-input",{attrs:{placeholder:"请输入客户来源"},model:{value:e.addUserDate.source_from,callback:function(t){e.$set(e.addUserDate,"source_from",t)},expression:"addUserDate.source_from"}})],1),a("el-form-item",{attrs:{label:"客户状态：",prop:"customer_status"}},[a("el-select",{attrs:{placeholder:"请选择客户状态"},model:{value:e.addUserDate.customer_status,callback:function(t){e.$set(e.addUserDate,"customer_status",t)},expression:"addUserDate.customer_status"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),a("el-form-item",{attrs:{label:"客户类别：",prop:"customer_class"}},[a("el-select",{attrs:{placeholder:"请选择客户类别"},model:{value:e.addUserDate.customer_class,callback:function(t){e.$set(e.addUserDate,"customer_class",t)},expression:"addUserDate.customer_class"}},e._l(e.options1,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)],1),a("p",{staticClass:"fullow"},[e._v("跟进记录")]),a("el-form",{ref:"ruleForm",staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:"",model:e.addFull,rules:e.rulessOne}},[a("el-form-item",{attrs:{label:"沟通套餐：",prop:"follow_product"}},[a("el-input",{attrs:{placeholder:"请输入沟通套餐"},model:{value:e.addFull.follow_product,callback:function(t){e.$set(e.addFull,"follow_product",t)},expression:"addFull.follow_product"}})],1),a("el-form-item",{attrs:{label:"跟单方式：",prop:"follow_class"}},[a("el-input",{attrs:{placeholder:"请输入跟单方式"},model:{value:e.addFull.follow_class,callback:function(t){e.$set(e.addFull,"follow_class",t)},expression:"addFull.follow_class"}})],1),a("el-form-item",{attrs:{label:"跟单内容：",prop:"follow_content"}},[a("el-input",{attrs:{placeholder:"请输入跟单内容"},model:{value:e.addFull.follow_content,callback:function(t){e.$set(e.addFull,"follow_content",t)},expression:"addFull.follow_content"}})],1),a("el-form-item",{attrs:{label:"跟单类型：",prop:"follow_customer_class"}},[a("el-select",{attrs:{placeholder:"请选择跟单类别"},model:{value:e.addFull.follow_customer_class,callback:function(t){e.$set(e.addFull,"follow_customer_class",t)},expression:"addFull.follow_customer_class"}},e._l(e.options1,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),a("el-form-item",{attrs:{label:"客户状态：",prop:"follow_status"}},[a("el-select",{attrs:{placeholder:"请选择客户状态"},model:{value:e.addFull.follow_status,callback:function(t){e.$set(e.addFull,"follow_status",t)},expression:"addFull.follow_status"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),a("el-form-item",{attrs:{label:"下次跟进时间：",prop:"next_follow_time"}},[a("div",{staticStyle:{width:"190px"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择下次跟进日期","value-format":"yyyy-MM-dd"},model:{value:e.addFull.next_follow_time,callback:function(t){e.$set(e.addFull,"next_follow_time",t)},expression:"addFull.next_follow_time"}})],1)])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTelt,expression:"loadingTelt"}],staticClass:"formBottom",staticStyle:{width:"100%",cursor:"pointer"},attrs:{data:e.tableData,border:"","highlight-current-row":"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"row-click":e.handClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{label:"合同状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.customer__is_post?a("el-button",{attrs:{type:"info"}},[e._v("未提交")]):-1==t.row.is_money_back?a("el-button",{attrs:{type:"danger"}},[e._v("审核失败")]):2==t.row.customer__is_post?a("el-button",{attrs:{type:"warning"}},[e._v("待审核")]):3==t.row.customer__is_post?a("el-button",{attrs:{type:"success"}},[e._v("审核成功")]):e._e()]}}],null,!1,1311805234)}),a("el-table-column",{attrs:{prop:"customer_id__company_name",label:"所属公司",align:"center"}}),a("el-table-column",{attrs:{prop:"customer_id__contacts",label:"客户姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"customer_id__contacts_phone",label:"联系方式",align:"center"}}),a("el-table-column",{attrs:{prop:"create_time",label:"添加时间",align:"center"}}),a("el-table-column",{attrs:{prop:"customer__source_from",label:"客户来源",align:"center"}}),a("el-table-column",{attrs:{prop:"customer__company_industry",label:"客户行业",align:"center"}}),a("el-table-column",{attrs:{prop:"customer_id__customer_class",label:"客户意向",align:"center"}}),a("el-table-column",{attrs:{prop:"customer_id__follow_product",label:"销售套餐",align:"center"}}),a("el-table-column",{attrs:{prop:"customer_id__customer_status",label:"客户状态",align:"center"}}),a("el-table-column",{attrs:{prop:"customer__renew_count",label:"成交次数",align:"center"}}),a("el-table-column",{attrs:{prop:"update_time",label:"最近工单时间",align:"center"}}),a("el-table-column",{attrs:{label:"最近成交时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(null==t.row.customer__last_deal_time?"无":t.row.customer__last_deal_time))])]}}],null,!1,2735216952)}),a("el-table-column",{attrs:{label:"跟单次数",align:"center",prop:"follow_count"}}),a("el-table-column",{attrs:{label:"下次跟进时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(null==t.row.next_follow_time?"无":t.row.next_follow_time))])]}}],null,!1,1612416440)}),a("el-table-column",{attrs:{label:"销售经理",align:"center",prop:"sale_person__user_name"}})],1),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-size":50,background:"",total:e.totalNmb,layout:"total, prev, pager, next"},on:{"current-change":e.handleCurrentChange,"prev-click":e.prevClick,"next-click":e.nextClick}}),a("el-dialog",{staticClass:"diao",attrs:{title:"客户详情",visible:e.centerDialogVisible,width:"46%",center:"",top:"0","before-close":e.handleClose},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-steps",{staticStyle:{"margin-bottom":"20px"},attrs:{active:e.isPostNumber,"finish-status":"success",simple:""}},[a("el-step",{attrs:{title:"提交合同"}}),a("el-step",{attrs:{title:"正在审核"}}),a("el-step",{attrs:{title:"审核成功"}})],1),a("el-button",{attrs:{type:"primary",round:"",disabled:e.isPost},on:{click:e.contractClick}},[e._v("成交")]),a("el-button",{attrs:{type:"danger",round:"",disabled:e.isPost},on:{click:e.renewClick}},[e._v("续费")]),-1==e.is_money_back?a("el-button",{attrs:{type:"primary",round:""},on:{click:e.modifyClickT}},[e._v("修改合同并提交")]):e._e(),-1==e.is_money_back?a("p",{staticStyle:{color:"red","font-size":"15px"}},[e._v("合同拒绝理由："+e._s(""==this.deal_check_remarks?"暂无理由":this.deal_check_remarks))]):e._e(),a("div",{staticClass:"modify"},[e.modif?a("el-button",{attrs:{type:"success",icon:"el-icon-edit",round:""},on:{click:e.modifyClick}},[e._v("修改")]):a("el-button",{attrs:{type:"danger",icon:"el-icon-check",round:""},on:{click:e.PreservaClick}},[e._v("保存")])],1),a("el-form",{staticClass:"demo-table-expand formBottom",attrs:{"label-position":"left",inline:"",model:e.userXq}},[a("el-form-item",{attrs:{label:"所属公司："}},[e.Preserva?a("span",[e._v(e._s(e.userXq.company_name))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.company_name,callback:function(t){e.$set(e.userXq,"company_name",t)},expression:"userXq.company_name"}})],1),a("el-form-item",{attrs:{label:"所属城市："}},[e.Preserva?a("span",[e._v(e._s(e.userXq.company_city))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.company_city,callback:function(t){e.$set(e.userXq,"company_city",t)},expression:"userXq.company_city"}})],1),a("el-form-item",{attrs:{label:"公司地址："}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.userXq.company_address}},[e.Preserva?a("span",[e._v(e._s(e.userXq.company_address))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.company_address,callback:function(t){e.$set(e.userXq,"company_address",t)},expression:"userXq.company_address"}})],1)],1),a("el-form-item",{attrs:{label:"公司职位："}},[e.Preserva?a("span",[e._v(e._s(e.userXq.contacts_title))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.contacts_title,callback:function(t){e.$set(e.userXq,"contacts_title",t)},expression:"userXq.contacts_title"}})],1),a("el-form-item",{attrs:{label:"客户姓名："}},[e.Preserva?a("span",[e._v(e._s(e.userXq.contacts))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.contacts,callback:function(t){e.$set(e.userXq,"contacts",t)},expression:"userXq.contacts"}})],1),a("el-form-item",{attrs:{label:"联系电话："}},[e.Preserva?a("span",[e._v(e._s(e.userXq.contacts_phone))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.contacts_phone,callback:function(t){e.$set(e.userXq,"contacts_phone",t)},expression:"userXq.contacts_phone"}})],1),a("el-form-item",{attrs:{label:"联系邮箱："}},[e.Preserva?a("span",[e._v(e._s(e.userXq.company_email))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.company_email,callback:function(t){e.$set(e.userXq,"company_email",t)},expression:"userXq.company_email"}})],1),a("el-form-item",{attrs:{label:"联系QQ："}},[e.Preserva?a("span",[e._v(e._s(null==e.userXq.qq_id?"无":e.userXq.qq_id))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.qq_id,callback:function(t){e.$set(e.userXq,"qq_id",t)},expression:"userXq.qq_id"}})],1),a("el-form-item",{attrs:{label:"联系微信："}},[e.Preserva?a("span",[e._v(e._s(null==e.userXq.wx_id?"无":e.userXq.wx_id))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.wx_id,callback:function(t){e.$set(e.userXq,"wx_id",t)},expression:"userXq.wx_id"}})],1),a("el-form-item",{attrs:{label:"客户行业："}},[e.Preserva?a("span",[e._v(e._s(e.userXq.company_industry))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.company_industry,callback:function(t){e.$set(e.userXq,"company_industry",t)},expression:"userXq.company_industry"}})],1),a("el-form-item",{attrs:{label:"客户来源："}},[a("span",[e._v(e._s(e.userXq.source_from))])]),a("el-form-item",{attrs:{label:"沟通套餐："}},[e.Preserva?a("span",[e._v(e._s(e.userXq.follow_product))]):a("el-input",{attrs:{placeholder:"请输入修改内容"},model:{value:e.userXq.follow_product,callback:function(t){e.$set(e.userXq,"follow_product",t)},expression:"userXq.follow_product"}})],1),a("el-form-item",{attrs:{label:"客户状态："}},[e.Preserva?a("span",[e._v(e._s(e.userXq.customer_status))]):a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userXq.customer_status,callback:function(t){e.$set(e.userXq,"customer_status",t)},expression:"userXq.customer_status"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),a("el-form-item",{attrs:{label:"客户类别："}},[e.Preserva?a("span",[e._v(e._s(e.userXq.customer_class))]):a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userXq.customer_class,callback:function(t){e.$set(e.userXq,"customer_class",t)},expression:"userXq.customer_class"}},e._l(e.options1,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),a("el-form-item",{attrs:{label:"跟进备注："}},[a("span",[e._v(e._s(e.userXq.last_follow_content))])])],1),a("p",{staticClass:"fullow"},[e._v("跟进记录")]),a("div",{staticClass:"modify"},[a("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus-outline",round:""},on:{click:e.addFullow}},[e._v("添加记录")])],1),e._l(this.followRecord,function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.followShow,expression:"followShow"}],key:s,staticClass:"fullowP"},[a("div",{staticClass:"timeClass"},[a("span",{staticStyle:{color:"#22A4FF"}},[e._v(e._s(t.create_time))]),a("span",[e._v("工单类型："+e._s(t.follow_class))]),a("span",{staticStyle:{color:"red"}},[e._v("下次跟进时间："+e._s(t.next_follow_time))])]),a("div",{staticClass:"timeP"},[a("p",[e._v("跟进人姓名："+e._s(t.sale_person__user_name))]),a("p",[e._v("跟进状态："+e._s(t.follow_status))]),a("p",[e._v("跟进类别："+e._s(t.follow_customer_class))]),a("p",[e._v("跟进内容："+e._s(t.follow_content))])])])}),a("h3",{directives:[{name:"show",rawName:"v-show",value:e.followShow1,expression:"followShow1"}],staticStyle:{"text-align":"center"}},[e._v("暂无跟进记录，可点击添加记录")]),a("el-dialog",{attrs:{width:"35%",title:"添加跟进记录",visible:e.fullowDia,"append-to-body":""},on:{"update:visible":function(t){e.fullowDia=t}}},[a("el-form",{ref:"ruleFullow",staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:"",model:e.addFull,rules:e.rulessFullow}},[a("el-form-item",{attrs:{label:"跟单方式：",prop:"follow_class"}},[a("el-input",{attrs:{placeholder:"请输入跟单方式"},model:{value:e.addFull.follow_class,callback:function(t){e.$set(e.addFull,"follow_class",t)},expression:"addFull.follow_class"}})],1),a("el-form-item",{attrs:{label:"客户状态：",prop:"follow_status"}},[a("el-select",{attrs:{placeholder:"请选择客户状态"},model:{value:e.addFull.follow_status,callback:function(t){e.$set(e.addFull,"follow_status",t)},expression:"addFull.follow_status"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),a("el-form-item",{attrs:{label:"客户类型：",prop:"follow_customer_class"}},[a("el-select",{attrs:{placeholder:"请选择跟单类别"},model:{value:e.addFull.follow_customer_class,callback:function(t){e.$set(e.addFull,"follow_customer_class",t)},expression:"addFull.follow_customer_class"}},e._l(e.options1,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),a("el-form-item",{attrs:{label:"下次跟进：",prop:"next_follow_time"}},[a("div",{staticClass:"inputBox",staticStyle:{width:"190px"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择下次跟进日期","value-format":"yyyy-MM-dd"},model:{value:e.addFull.next_follow_time,callback:function(t){e.$set(e.addFull,"next_follow_time",t)},expression:"addFull.next_follow_time"}})],1)]),a("el-form-item",{staticClass:"boxForm",staticStyle:{width:"100%"},attrs:{label:"跟单内容：",prop:"follow_content"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},placeholder:"请输入跟单内容"},model:{value:e.addFull.follow_content,callback:function(t){e.$set(e.addFull,"follow_content",t)},expression:"addFull.follow_content"}})],1)],1),a("div",{staticClass:"suecss"},[a("el-button",{attrs:{type:"success",round:""},on:{click:function(t){return e.fullowClick("ruleFullow")}}},[e._v("保存")]),a("el-button",{attrs:{type:"danger",round:""},on:{click:e.fullowCancel}},[e._v("取消")])],1)],1),a("el-dialog",{attrs:{width:"35%",title:"确认合同信息",visible:e.contract,"append-to-body":""},on:{"update:visible":function(t){e.contract=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:"",model:e.contractData,rules:e.rules}},[a("el-form-item",{attrs:{label:"合同套餐：",prop:"deal_product"}},[a("el-input",{attrs:{placeholder:"请输入合同套餐"},model:{value:e.contractData.deal_product,callback:function(t){e.$set(e.contractData,"deal_product",t)},expression:"contractData.deal_product"}})],1),a("el-form-item",{attrs:{label:"回款金额：",prop:"money_back"}},[a("el-input",{attrs:{placeholder:"请输入回款金额"},model:{value:e.contractData.money_back,callback:function(t){e.$set(e.contractData,"money_back",t)},expression:"contractData.money_back"}})],1),a("el-form-item",{attrs:{label:"开通账号：",prop:"opened_account"}},[a("el-input",{attrs:{placeholder:"请输入开通账号"},model:{value:e.contractData.opened_account,callback:function(t){e.$set(e.contractData,"opened_account",t)},expression:"contractData.opened_account"}})],1),a("el-form-item",{attrs:{label:"合同备注：",prop:"contract_content"}},[a("el-input",{attrs:{placeholder:"请输入合同备注"},model:{value:e.contractData.contract_content,callback:function(t){e.$set(e.contractData,"contract_content",t)},expression:"contractData.contract_content"}})],1)],1),a("el-upload",{attrs:{action:"/hr24/upload_img_file/","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"before-upload":e.beforeUpload,"on-success":e.handSuccess,"before-remove":e.handleRemove,data:e.uploaDate,"file-list":e.fileList,"show-file-list":e.showFile,accept:"image/jpg, image/jpeg, image/png"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传合同图片")])],1),a("h5",{staticStyle:{color:"red"}},[e._v("*图片格式只支持jpg/jpeg/png格式")]),a("el-upload",{attrs:{action:"/hr24/upload_img_file/","list-type":"picture-card","on-preview":e.handlePicture,"on-remove":e.moneyRemove,"before-upload":e.beforeUpload1,"show-file-list":e.showFile1,"file-list":e.fileList1,"on-success":e.handSuccess1,data:e.uploaDate1,accept:"image/jpg, image/jpeg, image/png"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传回款图片")])],1),a("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),a("el-dialog",{attrs:{visible:e.dialogVisible1,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible1=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl1,alt:""}})]),a("div",{staticClass:"suecss"},[a("el-button",{attrs:{type:"success",round:""},on:{click:function(t){return e.contractUrlClick("ruleForm")}}},[e._v("确定提交")]),a("el-button",{attrs:{type:"danger",round:""},on:{click:e.Cancellation}},[e._v("取消")])],1)],1)],2)],1):e._e()},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("h4",[s("img",{staticStyle:{"margin-right":"10px"},attrs:{src:a("8240")}}),e._v("全部客户\n  ")])}],r=a("f499"),i=a.n(r),n=(a("1c46"),a("7ab5"),{data:function(){return{dialog:!1,loadingSale:!0,drawer:!1,addUse:!1,saleShow:!0,user_type:"",currentPage:1,totalNmb:0,value2:!1,dialogImageUrl:"",dialogImageUrl1:"",dialogVisible:!1,dialogVisible1:!1,isPost:!1,is_money_back:"",deal_check_remarks:"",value1:"",contract:!1,showFile:!0,showFile1:!0,centerDialogVisible:!1,innerDrawer:!1,Preserva:!0,modif:!0,loadingTelt:!0,isPostNumber:0,followShow:!0,followShow1:!1,shifang:!1,user_id:"",fullowDia:!1,radioSale:"",addUserDate:{},addFull:{},agentId:0,options:["0-暂未联系","1-电话","2-微信","3-拜访","4-需求","5-报价"],options1:["A类客户","B类客户","C类客户","D未标记"],radioSa:"不限",usereId:[],userNum:0,ueseDetails:"",userName:"",currentdate:"",tableData:[],followRecord:[],saleNamer:[],userXq:{},customerId:"",contractData:{},buttonNumber:0,saleId:"",dealId:"",session_key:"",fileList:[{name:"",url:""}],fileList1:[{name:"",url:""}],rules:{deal_product:[{required:!0,message:"请输入合同套餐",trigger:"blur"},{min:4,max:100,message:"长度在 4 到 100 个字符",trigger:"blur"}],money_back:[{required:!0,message:"请输入回款金额",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],opened_account:[{required:!0,message:"请输入开通账号，必须为手机号",trigger:"blur"},{min:11,max:11,message:"手机号码长度应为11位，请检查！",trigger:"blur"}],contract_content:[{required:!0,message:"请输入合同备注，如没有请填写无备注",trigger:"blur"},{min:1,max:100,message:"如没有请填写无备注",trigger:"blur"}]},rulessOne:{follow_product:[{required:!0,message:"请输入沟通套餐",trigger:"blur"},{min:4,max:100,message:"长度在 4 到 100 个字符",trigger:"blur"}],next_follow_time:[{required:!0,message:"请输入选择下次跟进时间",trigger:"blur"}],follow_class:[{required:!0,message:"请输入跟单方式",trigger:"blur"},{min:2,max:11,message:"长度在 4 到 11 个字符",trigger:"blur"}],follow_content:[{required:!0,message:"请输入沟通内容",trigger:"blur"},{min:1,max:200,message:"如没有请填写无备注",trigger:"blur"}],follow_status:[{required:!0,message:"请输入客户状态",trigger:"blur"}],follow_customer_class:[{required:!0,message:"请选择跟单类型",trigger:"blur"}]},ruless:{company_name:[{required:!0,message:"请输入公司名称",trigger:"blur"},{min:3,max:15,message:"长度在 3 到 15 个字符",trigger:"blur"}],contacts:[{required:!0,message:"请输入客户姓名",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],contacts_phone:[{required:!0,message:"请输入联系方式",trigger:"blur"},{min:11,max:12,message:"长度在11个字符",trigger:"blur"}],contacts_title:[{required:!0,message:"请输入公司职位",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],company_industry:[{required:!0,message:"请输入公司行业",trigger:"blur"},{min:2,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],source_from:[{required:!0,message:"请输入客户来源",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],customer_status:[{required:!0,message:"请选择沟通状态",trigger:"blur"}],company_city:[{required:!0,message:"请输入城市",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],customer_class:[{required:!0,message:"请选择客户类别",trigger:"blur"}]},rulessFullow:{follow_product:[{required:!0,message:"请输入沟通套餐",trigger:"blur"},{min:3,max:100,message:"长度在 4 到 100 个字符",trigger:"blur"}],follow_class:[{required:!0,message:"请输入跟单方式",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],follow_content:[{required:!0,message:"请输入跟单内容",trigger:"blur"},{min:2,max:200,message:"长度在 2 到 100 个字符！",trigger:"blur"}],follow_customer_class:[{required:!0,message:"请输入跟单类型",trigger:"blur"},{min:1,max:100,message:"长度在 1 到 100 个字符",trigger:"blur"}],follow_status:[{required:!0,message:"请输入客户状态",trigger:"blur"}],next_follow_time:[{required:!0,message:"请选择下次跟进时间",trigger:"blur"}]},uploaDate1:{customer_id:"",user_id:"",img_class:"合同",session_key:""},uploaDate:{customer_id:"",user_id:"",img_class:"汇款",session_key:""},contractUrl:[],moneyUrl:[]}},methods:{handleSelectionChange:function(e){var t=this;this.userNum=e.length;var a=[];e.forEach(function(e){a.push(e.customer_id),t.usereId=a})},release:function(){var e=this;if(this.userNum){var t=new URLSearchParams;t.append("customer_id",this.usereId),t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/customer_release/",data:t}).then(function(t){1==t.data.status&&(e.shifang=!0,e.$message({showClose:!0,message:"客户已成功释放到公海",type:"success"}),e.uesrData(0,0,0,""==e.radioSale?"0":e.radioSale))})}else this.$message({showClose:!0,message:"请至少选择一项释放",type:"error"})},addTime:function(){this.uesrData(0,0,0,""==this.radioSale?"0":this.radioSale)},followTiem:function(){this.uesrData(1,0,0,""==this.radioSale?"0":this.radioSale)},customerType:function(){this.uesrData(2,0,0,""==this.radioSale?"0":this.radioSale)},modifyClick:function(){this.Preserva=!1,this.modif=!1},PreservaClick:function(){var e=this;this.Preserva=!0,this.modif=!0;var t=new URLSearchParams;t.append("change_data",i()(this.userXq)),t.append("customer_id",this.customerId),t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/change_customer_info/",data:t}).then(function(t){1==t.data.status?(e.uesrData(0,0,0,""==e.radioSale?"0":e.radioSale),e.$message({showClose:!0,message:t.data.data,type:"success"})):e.$message({showClose:!0,message:"修改信息失败，请刷新重试！",type:"error"})})},addUser:function(){var e=this;this.addUse=!0;var t=JSON.parse(sessionStorage.getItem("userInfo"));this.userName=t.data.data.real_name;var a=new URLSearchParams;a.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/return_customer_dict/",data:a}).then(function(t){e.addUserDate=t.data.data}).catch(function(e){});var s=new Date,l="-",o=":",r=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,i=s.getDate()<10?"0"+s.getDate():s.getDate();this.currentdate=s.getFullYear()+l+r+l+i+" "+s.getHours()+o+s.getMinutes()+o+s.getSeconds()},userClick:function(e,t){var a=this;this.$refs[e].validate(function(e){e?a.$refs[t].validate(function(e){if(e){var t=new URLSearchParams;t.append("customer_data",i()(a.addUserDate)),t.append("follow_record_data",i()(a.addFull)),t.append("session_key",a.session_key),a.$http({method:"post",url:"hr24/create_customer_info/",data:t}).then(function(e){1==e.data.status?(a.addUse=!1,a.addFull={},a.$message({showClose:!0,message:"新增客户成功",type:"success"}),a.uesrData(0,0,0,""==a.radioSale?"0":a.radioSale)):-2==e.data.status?a.$message({showClose:!0,message:e.data.data,type:"error"}):-3==e.data.status&&a.$message({showClose:!0,message:e.data.data,type:"error"})}).catch(function(e){console.log(e)})}else a.$message({showClose:!0,message:"*项为必填项，请检查重新提交！",type:"error"})}):a.$message({showClose:!0,message:"*项为必填项，请检查重新提交！",type:"error"})})},Preservation:function(){this.dialog=!1},handleClose:function(e){this.Preserva=!0,this.modif=!0,e()},addUseClose:function(e){this.$confirm("确认放弃新增客户？").then(function(t){e()}).catch(function(e){})},handClick:function(e){var t=this;this.saleId=e.id,this.dealId=e.deal_id,this.centerDialogVisible=!0,this.customerId=e.customer_id,this.is_money_back=e.is_money_back;var a=new URLSearchParams;a.append("agent_id",this.agentId),a.append("customer_id",e.customer_id),a.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/sale_customer_info/",data:a}).then(function(e){-2==e.data.status?t.$message({showClose:!0,message:"网络请求错误，刷新重试！",type:"error"}):(t.userXq=e.data.data.customer_info[0],t.deal_check_remarks=e.data.data.deal_check_remarks,t.followRecord=e.data.data.follow_record,t.isPostNumber=e.data.data.customer_info[0].is_post,1!=e.data.data.customer_info[0].is_post?t.isPost=!0:t.isPost=!1,0!=t.followRecord.length?(t.followShow=!0,t.followShow1=!1):(t.followShow=!1,t.followShow1=!0))})},addFullow:function(){var e=this;this.fullowDia=!0;var t=new URLSearchParams;t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/return_record_dict/",data:t}).then(function(t){e.addFull=t.data.data}).catch(function(e){console.log(e)})},fullowClick:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var a=new URLSearchParams;a.append("customer_id",t.customerId),a.append("follow_data",i()(t.addFull)),a.append("session_key",t.session_key),t.$http({method:"post",url:"hr24/add_follow_record/",data:a}).then(function(e){if(1==e.data.status){t.fullowDia=!1;var a=new URLSearchParams;a.append("agent_id",t.agentId),a.append("customer_id",t.customerId),a.append("session_key",t.session_key),t.$http({method:"post",url:"hr24/sale_customer_info/",data:a}).then(function(e){t.uesrData(0,0,0,""==t.radioSale?"0":t.radioSale),t.$message({showClose:!0,message:"保存跟单记录成功",type:"success"}),-2==e.data.status?t.$message({showClose:!0,message:"网络请求错误，刷新重试！",type:"error"}):(t.userXq=e.data.data.customer_info[0],t.followRecord=e.data.data.follow_record,0!=t.followRecord.length?(t.followShow=!0,t.followShow1=!1):(t.followShow=!1,t.followShow1=!0))})}else t.$message({showClose:!0,message:e.data.data,type:"error"})}).catch(function(e){console.log(e)})}else t.$message({showClose:!0,message:"请检查跟进记录是否填写完整",type:"error"})})},fullowCancel:function(e){var t=this;this.$confirm("确认放弃保存跟单记录？").then(function(e){t.fullowDia=!1}).catch(function(e){})},Cancellation:function(){var e=this;this.$confirm("确认放弃提交合同吗？").then(function(t){e.contract=!1}).catch(function(e){})},buttonClick:function(){var e=this;this.contract=!0;var t=new URLSearchParams;t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/return_sale_deal_dict/",data:t}).then(function(t){1==t.data.status&&(e.contractData=t.data.data)}).catch(function(e){console.log(e)})},contractClick:function(){this.fileList=[],this.fileList1=[],this.buttonClick(),this.buttonNumber=0},modifyClickT:function(){var e=this;this.contract=!0;var t=new URLSearchParams;t.append("deal_id",this.dealId),t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/return_sale_deal_info/",data:t}).then(function(t){1==t.data.status&&(e.contractData=t.data.data.deal_info[0],e.fileList=e.contractData.contract_img_url,e.fileList1=e.contractData.money_back_img_url)})},renewClick:function(){this.buttonClick(),this.buttonNumber=1},beforeUpload:function(e){this.uploaDate.customer_id=this.customerId,this.uploaDate.user_id=1,this.uploaDate.session_key=this.session_key},beforeUpload1:function(e){this.uploaDate1.customer_id=this.customerId,this.uploaDate1.user_id=1,this.uploaDate1.session_key=this.session_key},handleRemove:function(e,t){this.fileList=t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handSuccess:function(e,t){-2==e.status?this.$message({showClose:!0,message:"上传文件类型错误！",type:"error"}):-1==e.status?this.$message({showClose:!0,message:"'图片保存失败！请刷新重试",type:"error"}):-3==e.status?(this.contractUrl.push(e.data),this.$message({showClose:!0,message:"这张图片已经上传过啦！",type:"error"})):-10==e.status?this.$message({showClose:!0,message:"用户未登录！",type:"error"}):this.contractUrl.push(e.data)},handSuccess1:function(e){-2==e.status?this.$message({showClose:!0,message:"上传文件类型错误！",type:"error"}):-1==e.status?this.$message({showClose:!0,message:"图片保存失败！请刷新重试",type:"error"}):-3==e.status?(this.moneyUrl.push(e.data),this.$message({showClose:!0,message:"这张图片已经上传过啦！",type:"error"})):-10==e.status?this.$message({showClose:!0,message:"用户未登录！",type:"error"}):this.moneyUrl.push(e.data)},handlePicture:function(e){this.dialogImageUrl1=e.url,this.dialogVisible1=!0},moneyRemove:function(e,t){this.fileList1=t},buttonData:function(e){var t=this;if(0==this.contractUrl.length||0==this.moneyUrl.length)this.$message({showClose:!0,message:"你还没有上传合同/回款图片，请检查！",type:"error"});else{this.contractData.contract_img_url=this.contractUrl,this.contractData.money_back_img_url=this.moneyUrl;var a=new URLSearchParams;a.append("customer_id",this.customerId),a.append("sc_id",this.saleId),a.append("deal_data",i()(this.contractData)),a.append("session_key",this.session_key),this.$http({method:"post",url:e,data:a}).then(function(e){1==e.data.status?(t.contract=!1,t.showFile=!1,t.showFile1=!1,t.uesrData(0,0,0,""==t.radioSale?"0":t.radioSale),t.$message({showClose:!0,message:"合同提交成功，请等待审核！",type:"success"}),t.isPost=!0,t.isPostNumber=2):-3==e.data.status?(t.contract=!1,t.showFile=!1,t.showFile1=!1,t.$message({showClose:!0,message:"该合同已提交过，请勿重复提交！",type:"error"})):t.$message({showClose:!0,message:e.data.data,type:"erro"})}).catch(function(e){console.log(e)})}},contractUrlClick:function(e){var t=this;this.contractData.contract_img_url=[],this.contractData.money_back_img_url=[],this.$refs[e].validate(function(e){if(!e)return t.$message({showClose:!0,message:"合同信息填写有误，请检查重写！",type:"error"}),!1;if(-1==t.is_money_back){t.contractUrl.forEach(function(e,a){t.contractData.contract_img_url[a]=e}),t.fileList.forEach(function(e){t.contractData.contract_img_url.push(e.url)}),t.moneyUrl.forEach(function(e,a){t.contractData.money_back_img_url[a]=e}),t.fileList1.forEach(function(e){t.contractData.money_back_img_url.push(e.url)});var a=new URLSearchParams;a.append("customer_id",t.customerId),a.append("deal_id",t.dealId),a.append("sc_id",t.saleId),a.append("deal_data",i()(t.contractData)),a.append("session_key",t.session_key),t.$http({method:"post",url:"hr24/post_change_deal/",data:a}).then(function(e){1==e.data.status?(t.uesrData(0,1,0,""==t.radioSale?"0":t.radioSale),t.$message({showClose:!0,message:e.data.data,type:"success"}),t.contract=!1,t.centerDialogVisible=!1):t.$message({showClose:!0,message:e.data.data,type:"error"})})}else 0==t.buttonNumber?t.buttonData("hr24/post_deal/"):1==t.buttonNumber&&t.buttonData("hr24/renew_post_deal/")})},uesrData:function(e,t,a,s){var l=this,o=new URLSearchParams;o.append("order_by_key",e),o.append("is_deal",t),o.append("page",a),o.append("sale_id",s),o.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/sale_customer_list/",data:o}).then(function(e){-2==e.data.status?(l.loadingTelt=!1,l.tableData=e.data.data.customer_list,l.totalNmb=0,l.shifang||l.$message({showClose:!0,message:e.data.data,type:"error"})):1==e.data.status&&(l.loadingTelt=!1,l.tableData=e.data.data.customer_list,l.totalNmb=e.data.data.customer_count)})},switchV:function(){this.value2?this.uesrData(0,1,0,""==this.radioSale?"0":this.radioSale):this.uesrData(0,0,0,""==this.radioSale?"0":this.radioSale)},handleCurrentChange:function(e){this.currentPage=e,this.uesrData(0,0,e-1,""==this.radioSale?"0":this.radioSale)},prevClick:function(){this.uesrData(0,0,this.currentPage-2,""==this.radioSale?"0":this.radioSale)},nextClick:function(){this.uesrData(0,0,this.currentPage,""==this.radioSale?"0":this.radioSale)},radioGrou:function(e){this.radioSale=e,this.uesrData(0,0,this.currentPage-1,e)}},mounted:function(){var e=this,t=JSON.parse(sessionStorage.getItem("userInfo"));this.user_type=t.data.data.user_type,this.agentId=t.data.data.agent_id,this.session_key=t.data.data.session_key;var a=new URLSearchParams;a.append("order_by_key",0),a.append("sale_id",this.radioSa),a.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/sale_customer_list/",data:a}).then(function(t){-2==t.data.status?(e.loadingTelt=!1,e.$message({showClose:!0,message:t.data.data,type:"error"})):1==t.data.status&&(e.loadingTelt=!1,e.tableData=t.data.data.customer_list,e.totalNmb=t.data.data.customer_count)}),this.$http({method:"post",url:"hr24/return_sale_person_list/",data:a}).then(function(t){e.loadingSale=!1,e.saleNamer=t.data.data.sale_person_list})},watch:{"$store.state.storer.count":function(){var e=this,t=new URLSearchParams;t.append("order_by_key",0),t.append("sale_id",this.radioSa),t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/sale_customer_list/",data:t}).then(function(t){-2==t.data.status?(e.loadingTelt=!1,s,e.$message({showClose:!0,message:t.data.data,type:"error"})):1==t.data.status&&(e.loadingTelt=!1,e.tableData=t.data.data.customer_list,e.totalNmb=t.data.data.customer_count)})}}}),c=n,u=(a("08dd"),a("2877")),d=Object(u["a"])(c,l,o,!1,null,"aa9bcd52",null);t["default"]=d.exports},d9b3:function(e,t,a){}}]);