(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15a30538"],{"66c9":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[5==e.userType||9==e.userType?s("div",[s("h3",[e._v("新增人员")]),s("div",{staticClass:"inp"},[s("el-input",{attrs:{placeholder:"请设置登陆帐号"},model:{value:e.addAccounts.user_account,callback:function(t){e.$set(e.addAccounts,"user_account",t)},expression:"addAccounts.user_account"}}),s("el-input",{attrs:{placeholder:"请设置登陆密码","show-password":""},model:{value:e.addAccounts.user_password,callback:function(t){e.$set(e.addAccounts,"user_password",t)},expression:"addAccounts.user_password"}}),s("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.addAccounts.user_name,callback:function(t){e.$set(e.addAccounts,"user_name",t)},expression:"addAccounts.user_name"}}),s("el-select",{attrs:{placeholder:"请选择职位"},model:{value:e.Jd,callback:function(t){e.Jd=t},expression:"Jd"}},e._l(e.jdDetails,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})}),1),s("el-button",{staticStyle:{margin:"15px 0"},attrs:{type:"warning",round:""},on:{click:e.SureAdd}},[e._v("确定新增")])],1),s("el-dialog",{attrs:{title:"确认创建信息",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[s("div",{staticClass:"addJd"},[s("h5",[e._v("\n          新增人员：\n          "),s("span",[e._v(e._s(e.addAccounts.user_name))])]),s("h5",[e._v("\n          登陆帐号：\n          "),s("span",[e._v(e._s(e.addAccounts.user_account))])]),s("h5",[e._v("\n          登陆密码：\n          "),s("span",[e._v(e._s(e.addAccounts.user_password))])]),s("h5",[e._v("\n          职位：\n          "),s("span",[e._v(e._s(e.Jd))])])]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.SureAddVisible}},[e._v("确 定")])],1)]),s("el-dialog",{attrs:{title:"修改信息",visible:e.modifyFormVisible,width:"22%"},on:{"update:visible":function(t){e.modifyFormVisible=t}}},[s("el-form",{attrs:{model:e.form}},[s("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[s("el-input",{model:{value:e.form.user_name,callback:function(t){e.$set(e.form,"user_name",t)},expression:"form.user_name"}})],1),s("el-form-item",{attrs:{label:"帐号","label-width":e.formLabelWidth}},[s("el-input",{model:{value:e.form.user_account,callback:function(t){e.$set(e.form,"user_account",t)},expression:"form.user_account"}})],1),s("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[s("el-input",{attrs:{placeholder:"请输入需要修改的密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),s("el-form-item",{attrs:{label:"职位","label-width":e.formLabelWidth}},[s("el-select",{attrs:{placeholder:"请选择需要修改的职位"},model:{value:e.ModifyJd,callback:function(t){e.ModifyJd=t},expression:"ModifyJd"}},e._l(e.jdDetails,function(e,t){return s("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.modifyFormVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.sureModify}},[e._v("确定修改")])],1)],1),s("div",{staticClass:"screen"},[s("el-input",{attrs:{placeholder:"请输入姓名(只能筛选姓名)"},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),s("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success",round:""},on:{click:e.sureModifyTop}},[e._v("确定筛选")])],1),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.AccountInfo,border:""}},[s("el-table-column",{attrs:{prop:"create_time",label:"创建日期",align:"center"}}),s("el-table-column",{attrs:{prop:"user_account",label:"帐号",align:"center"}}),s("el-table-column",{attrs:{prop:"user_name",label:"姓名",align:"center"}}),s("el-table-column",{attrs:{prop:"user_type",label:"职位",align:"center"}}),s("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){return e.modify(t.$index,t.row)}}},[e._v("修改信息")]),s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,814931954)})],1)],1):e._e()])},o=[],n=s("f499"),r=s.n(n),i={data:function(){return{addAccounts:{},userName:"",centerDialogVisible:!1,modifyFormVisible:!1,session_key:"",password:"",jdDetails:[],AccountInfo:[],Jd:"",ModifyJd:"",userType:"",form:{},formLabelWidth:"120px"}},methods:{SureAdd:function(){""==this.Jd||""==this.addAccounts.user_account||""==this.addAccounts.user_password||""==this.addAccounts.user_name?this.$message({showClose:!0,message:"信息请填写完整！",type:"error"}):this.centerDialogVisible=!0},SureAddVisible:function(){var e=this,t=new URLSearchParams;t.append("user_class",this.Jd),t.append("user_data",r()(this.addAccounts)),t.append("search_keyword",this.userName),t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/create_crm_user/",data:t}).then(function(s){1==s.data.status?(e.addAccounts={},e.Jd="",e.centerDialogVisible=!1,e.listDate(t),e.$message({showClose:!0,message:s.data.data,type:"success"})):e.$message({showClose:!0,message:s.data.data,type:"error"})}).catch(function(e){console.log(e)})},listDate:function(e){var t=this;this.$http({method:"post",url:"hr24/user_list/",data:e}).then(function(e){1==e.data.status&&(t.AccountInfo=e.data.data.user_list)}).catch(function(e){console.log(e)})},modify:function(e,t){this.modifyFormVisible=!0,this.form=t},sureModify:function(){var e=this;if(""==this.password||""==this.ModifyJd||""==this.form.user_name||""==this.form.user_account)this.$message({showClose:!0,message:"修改信息未填写完整，请检查！",type:"error"});else{var t=new URLSearchParams;t.append("user_class",this.ModifyJd),t.append("account",this.form.user_account),t.append("password",this.password),t.append("user_name",this.form.user_name),t.append("cu_id",this.form.id),t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/change_crm_user_password/",data:t}).then(function(s){1==s.data.status?(e.listDate(t),e.modifyFormVisible=!1,e.password="",e.form={},e.$message({showClose:!0,message:s.data.data,type:"success"})):e.$message({showClose:!0,message:s.data.data,type:"error"})}).catch(function(e){console.log(e)})}},handleDelete:function(e,t){var s=this;this.$confirm("此操作将永久删除该帐号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){var e=new URLSearchParams;e.append("deleted_user_id",t.id),e.append("session_key",s.session_key),s.$http({method:"post",url:"hr24/deleted_user/",data:e}).then(function(t){1==t.data.status&&(s.listDate(e),s.$message({showClose:!0,message:t.data.data,type:"success"}))}).catch(function(e){console.log(e)})}).catch(function(){s.$message({type:"info",message:"已取消删除"})})},sureModifyTop:function(){var e=this,t=new URLSearchParams;t.append("search_keyword",this.userName),t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/user_list/",data:t}).then(function(t){1==t.data.status&&(e.AccountInfo=t.data.data.user_list)}).catch(function(e){console.log(e)})}},mounted:function(){var e=this,t=JSON.parse(sessionStorage.getItem("userInfo")).data.data;this.userType=t.user_type,this.session_key=t.session_key;var s=new URLSearchParams;s.append("search_keyword",this.userName),s.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/return_user_class/",data:s}).then(function(t){1==t.data.status&&(e.jdDetails=t.data.data)}).catch(function(e){console.log(e)}),this.$http({method:"post",url:"hr24/return_user_info/",data:s}).then(function(t){1==t.data.status&&(e.addAccounts=t.data.data)}).catch(function(e){console.log(e)}),this.$http({method:"post",url:"hr24/user_list/",data:s}).then(function(t){1==t.data.status&&(e.AccountInfo=t.data.data.user_list)}).catch(function(e){console.log(e)})}},c=i,l=(s("8511"),s("2877")),d=Object(l["a"])(c,a,o,!1,null,"af5f76c2",null);t["default"]=d.exports},8511:function(e,t,s){"use strict";var a=s("88ce"),o=s.n(a);o.a},"88ce":function(e,t,s){}}]);