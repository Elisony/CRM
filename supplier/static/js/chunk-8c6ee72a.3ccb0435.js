(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c6ee72a"],{3785:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("问题反馈")]),2!=e.agentId?a("div",[a("div",{staticClass:"demonstration"},[a("h4",[e._v("问题类别：")]),a("el-cascader",{staticStyle:{width:"30%"},attrs:{options:e.options,"show-all-levels":!1,checkStrictly:e.checkS},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1),a("div",{staticClass:"demonstration"},[a("h4",[e._v("问题描述：")]),a("el-input",{staticStyle:{width:"30%"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:8},maxlength:"255",placeholder:"请输入具体的问题描述"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1),a("div",{staticClass:"demons"},[a("el-button",{attrs:{type:"danger",round:""},on:{click:e.confirmer}},[e._v("确认提交")])],1)]):e._e(),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"create_time",label:"提交时间",align:"center"}}),a("el-table-column",{attrs:{prop:"create_user__user_name",label:"提交人员",align:"center"}}),a("el-table-column",{attrs:{prop:"problem_type_content",label:"问题类型",align:"center"}}),a("el-table-column",{attrs:{prop:"problem_content",label:"问题描述",align:"center"}}),a("el-table-column",{attrs:{label:"反馈情况",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"fontSiez"},[e._v(e._s(t.row.feedback_content))])]}}])}),2==e.agentId&&5==e.userType?a("el-table-column",{attrs:{prop:"address",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["尚未回复"==t.row.feedback_content?a("el-button",{attrs:{type:"warning",round:""},on:{click:function(a){return e.ReplyTo(t.row)}}},[e._v("回复此问题")]):a("el-button",{attrs:{type:"danger",disabled:"",round:""}},[e._v("已回复")])]}}],null,!1,3053063443)}):e._e()],1),a("el-pagination",{staticStyle:{"margin-top":"15px","text-align":"center"},attrs:{background:"",layout:"total, prev, pager, next",total:e.total,"current-page":e.currentPage,"page-size":e.pagesize},on:{"current-change":e.handleCurrentChange,"prev-click":e.prevClick,"next-click":e.nextClick}}),a("el-dialog",{attrs:{title:"回复问题",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入问题解决方案"},model:{value:e.Message,callback:function(t){e.Message=t},expression:"Message"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.ReplyMessage}},[e._v("确定回复")]),a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)},n=[],o={data:function(){return{value:[],centerDialogVisible:!1,valueId:"",checkS:!0,currentPage:0,showWord:!0,pagesize:50,total:0,ida:!1,problemId:"",textarea:"",Message:"",options:[],tableData:[],agentId:"",userType:"",session_key:""}},methods:{handleChange:function(){this.valueId=this.value[this.value.length-1]},confirmer:function(){var e=this;if(""==this.textarea||""==this.valueId)this.$message({showClose:!0,message:"请选择问题类别或填写问题描述",type:"error"});else{var t=new URLSearchParams;t.append("problem_type",this.valueId),t.append("problem_content",this.textarea),t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/create_problem/",data:t}).then(function(t){1==t.data.status?(e.value=[],e.valueId="",e.textarea="",e.ProblemList(0),e.$message({showClose:!0,message:t.data.data,type:"success"})):e.$message({showClose:!0,message:t.data.data,type:"error"})})}},ReplyTo:function(e){this.problemId=e.id,this.centerDialogVisible=!0},ReplyMessage:function(){var e=this,t=new URLSearchParams;t.append("problem_id",this.problemId),t.append("feedback_content",this.Message),t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/create_feedback/",data:t}).then(function(t){1==t.data.status&&(e.centerDialogVisible=!1,e.Message="",e.ProblemList(0),e.$message({showClose:!0,message:t.data.data,type:"success"}))})},ProblemList:function(e){var t=this,a=new URLSearchParams;a.append("page",e),a.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/problem_feedback_list/",data:a}).then(function(e){t.tableData=e.data.data.problem_list,t.total=e.data.data.problem_list_count})},handleCurrentChange:function(e){console.log(e)},prevClick:function(){},nextClick:function(){}},mounted:function(){var e=this,t=JSON.parse(sessionStorage.getItem("userInfo"));this.agentId=t.data.data.agent_id,this.userType=t.data.data.user_type,this.session_key=t.data.data.session_key;var a=new URLSearchParams;a.append("page",0),a.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/problem_type_list/",data:a}).then(function(t){e.options=t.data.data.problem_type_dict}),this.ProblemList(0)},watch:{"$store.state.storer.count":function(){this.ProblemList(0)}}},l=o,r=(a("c856"),a("2877")),i=Object(r["a"])(l,s,n,!1,null,"5a8cc2e7",null);t["default"]=i.exports},c856:function(e,t,a){"use strict";var s=a("ee79"),n=a.n(s);n.a},ee79:function(e,t,a){}}]);