(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9b8b9df4"],{"1ea8":function(e,t,a){},38427:function(e,t,a){"use strict";var l=a("1ea8"),s=a.n(l);s.a},f798:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.saleShow?a("div",[a("div",{staticClass:"teble"},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline,rules:e.rules}},[a("el-form-item",{attrs:{label:"公司名称",prop:"company_name"}},[a("el-input",{attrs:{placeholder:"公司名称"},model:{value:e.formInline.company_name,callback:function(t){e.$set(e.formInline,"company_name",t)},expression:"formInline.company_name"}})],1),a("el-form-item",{attrs:{label:"客户姓名",prop:"contacts"}},[a("el-input",{attrs:{placeholder:"客户姓名"},model:{value:e.formInline.contacts,callback:function(t){e.$set(e.formInline,"contacts",t)},expression:"formInline.contacts"}})],1),a("el-form-item",{attrs:{label:"联系方式",prop:"contacts_phone"}},[a("el-input",{attrs:{placeholder:"联系方式"},model:{value:e.formInline.contacts_phone,callback:function(t){e.$set(e.formInline,"contacts_phone",t)},expression:"formInline.contacts_phone"}})],1),a("el-form-item",{attrs:{label:"公司职位",prop:"contacts_title"}},[a("el-input",{attrs:{placeholder:"公司职位"},model:{value:e.formInline.contacts_title,callback:function(t){e.$set(e.formInline,"contacts_title",t)},expression:"formInline.contacts_title"}})],1),a("el-form-item",{attrs:{label:"所属行业",prop:"company_industry"}},[a("el-input",{attrs:{placeholder:"所属行业"},model:{value:e.formInline.company_industry,callback:function(t){e.$set(e.formInline,"company_industry",t)},expression:"formInline.company_industry"}})],1),a("el-form-item",{attrs:{label:"客户来源",prop:"source_from"}},[a("el-input",{attrs:{placeholder:"客户来源"},model:{value:e.formInline.source_from,callback:function(t){e.$set(e.formInline,"source_from",t)},expression:"formInline.source_from"}})],1),a("el-form-item",{attrs:{label:"沟通状态",prop:"customer_status"}},[a("el-select",{staticStyle:{width:"185px"},attrs:{placeholder:"请选择沟通状态"},model:{value:e.formInline.customer_status,callback:function(t){e.$set(e.formInline,"customer_status",t)},expression:"formInline.customer_status"}},[a("el-option",{attrs:{label:"已接通",value:"已接通"}}),a("el-option",{attrs:{label:"未接通",value:"未接通"}}),a("el-option",{attrs:{label:"已挂断",value:"已挂断"}}),a("el-option",{attrs:{label:"不考虑",value:"不考虑"}}),a("el-option",{attrs:{label:"号码无效",value:"号码无效"}})],1)],1),a("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{label:"客户类别",prop:"customer_class"}},[a("el-select",{staticStyle:{width:"185px"},attrs:{placeholder:"请选择客户类别"},model:{value:e.formInline.customer_class,callback:function(t){e.$set(e.formInline,"customer_class",t)},expression:"formInline.customer_class"}},[a("el-option",{attrs:{label:"A类客户",value:"A类客户"}}),a("el-option",{attrs:{label:"B类客户",value:"B类客户"}}),a("el-option",{attrs:{label:"C类客户",value:"C类客户"}}),a("el-option",{attrs:{label:"D未标记",value:"D未标记"}})],1)],1),a("el-form-item",{attrs:{label:"沟通备注"}},[a("el-input",{attrs:{placeholder:"沟通备注必填"},model:{value:e.connectRemarks,callback:function(t){e.connectRemarks=t},expression:"connectRemarks"}})],1),a("el-form-item",{staticStyle:{"margin-right":"20px","margin-left":"10px"},attrs:{label:"公司地址"}},[a("el-input",{attrs:{placeholder:"公司地址"},model:{value:e.formInline.company_address,callback:function(t){e.$set(e.formInline,"company_address",t)},expression:"formInline.company_address"}})],1),a("el-form-item",{attrs:{label:"联系微信"}},[a("el-input",{attrs:{placeholder:"联系微信"},model:{value:e.formInline.wx_id,callback:function(t){e.$set(e.formInline,"wx_id",t)},expression:"formInline.wx_id"}})],1)],1)],1),a("div",{staticClass:"addUser"},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.onSubmit("ruleForm")}}},[e._v("新增客户")])],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[5==e.user_type||7==e.user_type?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"radioGroup"},[a("span",[e._v("筛选销售人员：")]),e._l(e.saleNamer,function(t,l){return a("el-radio-group",{key:l,attrs:{size:"medium"},on:{change:function(a){return e.radioGrou(t.id)}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:t.user_name}})],1)})],2):e._e(),a("div",{staticStyle:{height:"40px","line-height":"40px"}},[a("strong",[e._v(e._s("不限"==e.radio?"全部":e.radio)+"总计通话量:")]),a("span",{staticStyle:{color:"red"}},[e._v("  "+e._s(e.salePersonConut))])]),a("el-button",{staticStyle:{height:"40px"},attrs:{type:"warning",round:""},on:{click:e.addCustomer}},[e._v("添加至我的客户（"+e._s(e.addName)+"）")])],1),5==e.user_type||7==e.user_type?a("el-date-picker",{staticStyle:{display:"block","margin-top":"10px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},on:{change:e.SxTime},model:{value:e.valueTime,callback:function(t){e.valueTime=t},expression:"valueTime"}}):e._e(),a("el-radio-group",{staticStyle:{margin:"10px 0"},on:{change:e.state},model:{value:e.radioPhone,callback:function(t){e.radioPhone=t},expression:"radioPhone"}},[a("el-radio-button",{attrs:{label:"不限"}}),a("el-radio-button",{attrs:{label:"未拨打"}}),a("el-radio-button",{attrs:{label:"已接通"}}),a("el-radio-button",{attrs:{label:"未接通"}}),a("el-radio-button",{attrs:{label:"已挂断"}}),a("el-radio-button",{attrs:{label:"不考虑"}}),a("el-radio-button",{attrs:{label:"无效号码"}})],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{width:"100%",cursor:"pointer"},attrs:{data:e.tableData,border:"","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"row-click":e.handClick,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{prop:"company_name",label:"公司名称",align:"center"}}),a("el-table-column",{attrs:{prop:"company_address",label:"公司地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""==t.row.company_address?"暂无地址":t.row.company_address))])]}}],null,!1,2931166993)}),a("el-table-column",{attrs:{prop:"contacts",label:"客户姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"contacts_phone",label:"联系方式",align:"center"}}),a("el-table-column",{attrs:{prop:"wx_id",label:"联系微信",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(null==t.row.wx_id?"暂无微信":t.row.wx_id))])]}}],null,!1,4218500181)}),a("el-table-column",{attrs:{prop:"contacts_title",label:"公司职位",align:"center"}}),a("el-table-column",{attrs:{prop:"company_industry",label:"所属行业",align:"center"}}),a("el-table-column",{attrs:{prop:"source_from",label:"客户来源",align:"center"}}),a("el-table-column",{attrs:{prop:"customer_class",label:"客户类别",align:"center"}}),a("el-table-column",{attrs:{prop:"connect_count",label:"沟通次数",align:"center"}}),a("el-table-column",{attrs:{label:"沟通状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.connect_status?a("el-tag",{attrs:{type:"success"}},[e._v("已接通")]):e._e(),1==t.row.connect_status?a("el-tag",{attrs:{type:"info"}},[e._v("未接通")]):e._e(),2==t.row.connect_status?a("el-tag",{attrs:{type:"warning"}},[e._v("已挂断")]):e._e(),3==t.row.connect_status?a("el-tag",[e._v("不考虑")]):e._e(),4==t.row.connect_status?a("el-tag",[e._v("无效号码")]):e._e(),-1==t.row.connect_status?a("el-tag",{attrs:{type:"danger"}},[e._v("未拨打")]):e._e()]}}],null,!1,3852168405)}),a("el-table-column",{attrs:{prop:"sale_person__user_name",label:"销售经理",align:"center"}}),a("el-table-column",{attrs:{label:"沟通备注",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""==t.row.customer__last_follow_content?"暂无备注":t.row.customer__last_follow_content))])]}}],null,!1,704890894)}),a("el-table-column",{attrs:{prop:"connect_remarks",label:"是否添加",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.is_add?a("el-tag",{attrs:{type:"success"}},[e._v("未添加")]):a("el-tag",{attrs:{type:"danger"}},[e._v("已添加")])]}}],null,!1,1541344552)})],1),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"10px"},attrs:{"current-page":e.currentPage,"page-size":50,background:"",total:e.totalNmb,layout:"total, prev, pager, next"},on:{"current-change":e.handleCurrentChange,"prev-click":e.prevClick,"next-click":e.nextClick}}),a("div",[a("el-dialog",{attrs:{title:"确定客户",visible:e.addSh,width:"46%",center:""},on:{"update:visible":function(t){e.addSh=t}}},[a("el-form",{ref:"ruleFormS",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.oldFormInline,rules:e.ruless}},[a("el-form-item",{attrs:{label:"公司名称",prop:"company_name"}},[a("el-input",{attrs:{placeholder:"公司名称"},model:{value:e.oldFormInline.company_name,callback:function(t){e.$set(e.oldFormInline,"company_name",t)},expression:"oldFormInline.company_name"}})],1),a("el-form-item",{attrs:{label:"客户姓名",prop:"contacts"}},[a("el-input",{attrs:{placeholder:"客户姓名"},model:{value:e.oldFormInline.contacts,callback:function(t){e.$set(e.oldFormInline,"contacts",t)},expression:"oldFormInline.contacts"}})],1),a("el-form-item",{attrs:{label:"联系方式",prop:"contacts_phone"}},[a("el-input",{attrs:{placeholder:"联系方式"},model:{value:e.oldFormInline.contacts_phone,callback:function(t){e.$set(e.oldFormInline,"contacts_phone",t)},expression:"oldFormInline.contacts_phone"}})],1),a("el-form-item",{attrs:{label:"公司职位",prop:"contacts_title"}},[a("el-input",{attrs:{placeholder:"公司职位"},model:{value:e.oldFormInline.contacts_title,callback:function(t){e.$set(e.oldFormInline,"contacts_title",t)},expression:"oldFormInline.contacts_title"}})],1),a("el-form-item",{attrs:{label:"所属行业",prop:"company_industry"}},[a("el-input",{attrs:{placeholder:"所属行业"},model:{value:e.oldFormInline.company_industry,callback:function(t){e.$set(e.oldFormInline,"company_industry",t)},expression:"oldFormInline.company_industry"}})],1),a("el-form-item",{attrs:{label:"客户来源",prop:"source_from"}},[a("el-input",{attrs:{placeholder:"客户来源"},model:{value:e.oldFormInline.source_from,callback:function(t){e.$set(e.oldFormInline,"source_from",t)},expression:"oldFormInline.source_from"}})],1),a("el-form-item",{attrs:{label:"沟通备注",prop:"connect_remarks"}},[a("el-input",{attrs:{placeholder:"沟通备注"},model:{value:e.oldFormInline.connect_remarks,callback:function(t){e.$set(e.oldFormInline,"connect_remarks",t)},expression:"oldFormInline.connect_remarks"}})],1),a("el-form-item",{attrs:{label:"沟通状态",prop:"customer_status"}},[a("el-select",{attrs:{placeholder:"请选择沟通状态"},model:{value:e.oldFormInline.customer_status,callback:function(t){e.$set(e.oldFormInline,"customer_status",t)},expression:"oldFormInline.customer_status"}},[a("el-option",{attrs:{label:"已接通",value:"已接通"}}),a("el-option",{attrs:{label:"未接通",value:"未接通"}}),a("el-option",{attrs:{label:"已挂断",value:"已挂断"}}),a("el-option",{attrs:{label:"不考虑",value:"不考虑"}}),a("el-option",{attrs:{label:"无效号码",value:"无效号码"}})],1)],1),a("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"公司地址"}},[a("el-input",{attrs:{placeholder:"公司地址"},model:{value:e.oldFormInline.company_address,callback:function(t){e.$set(e.oldFormInline,"company_address",t)},expression:"oldFormInline.company_address"}})],1),a("el-form-item",{staticStyle:{"margin-left":"10px"},attrs:{label:"联系微信"}},[a("el-input",{attrs:{placeholder:"联系微信"},model:{value:e.oldFormInline.wx_id,callback:function(t){e.$set(e.oldFormInline,"wx_id",t)},expression:"oldFormInline.wx_id"}})],1)],1),a("el-button",{staticStyle:{"margin-left":"45%"},attrs:{type:"success"},on:{click:function(t){return e.confirmAdd("ruleFormS")}}},[e._v("确认沟通")])],1)],1)],1):e._e()},s=[],n=a("f499"),r=a.n(n),o=(a("1c46"),{data:function(){return{currentPage:1,totalNmb:0,user_type:"",addName:0,radioPhone:"不限",id:"不限",customerId:[],saleNamer:[],formInline:{},oldFormInline:{},loading:!0,loadingTable:!0,customer_id:"",saleShow:!0,valueTime:"",timeNow:"",salePersonConut:0,idd:"",addSh:!1,session_key:"",sbwId:[],connectRemarks:"",radio:"不限",sbw_id:"",tableData:[],rules:{company_name:[{required:!0,message:"请输入公司名称",trigger:"blur"},{min:3,max:125,message:"长度在 3 到 125 个字符",trigger:"blur"}],contacts:[{required:!0,message:"请输入客户姓名",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],contacts_phone:[{required:!0,message:"请输入公司名称",trigger:"blur"},{min:11,max:11,message:"长度在11个字符",trigger:"blur"}],contacts_title:[{required:!0,message:"请输入公司职位",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],company_industry:[{required:!0,message:"请输入公司行业",trigger:"blur"},{min:2,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],source_from:[{required:!0,message:"请输入客户来源",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],customer_status:[{required:!0,message:"请选择沟通状态",trigger:"blur"}],customer_class:[{required:!0,message:"请选择沟通状态",trigger:"blur"}]},ruless:{company_name:[{required:!0,message:"请输入公司名称",trigger:"blur"},{min:3,max:125,message:"长度在 3 到 125 个字符",trigger:"blur"}],contacts:[{required:!0,message:"请输入客户姓名",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],contacts_phone:[{required:!0,message:"请输入公司名称",trigger:"blur"},{min:11,max:12,message:"长度在11个字符",trigger:"blur"}],contacts_title:[{required:!0,message:"请输入公司职位",trigger:"blur"},{min:2,max:8,message:"长度在 2 到 8 个字符",trigger:"blur"}],company_industry:[{required:!0,message:"请输入公司行业",trigger:"blur"},{min:2,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],source_from:[{required:!0,message:"请输入客户来源",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],customer_status:[{required:!0,message:"请选择沟通状态",trigger:"blur"}],connect_remarks:[{required:!0,message:"请选择沟通备注",trigger:"blur"}]}}},methods:{onSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({showClose:!0,message:"*项必填，请检查完善！！！",type:"error"}),!1;if(""==t.connectRemarks)t.$message({showClose:!0,message:"沟通备注不能为空",type:"error"});else{var a=new URLSearchParams;a.append("customer_data",r()(t.formInline)),a.append("call_status",t.formInline.customer_status),a.append("connect_remarks",t.connectRemarks),a.append("session_key",t.session_key),t.$http({method:"post",url:"hr24/create_new_sale_base_work/",data:a}).then(function(e){t.formInline={},t.connectRemarks="",1==e.data.status?(t.listData(void 0,t.currentPage-1),t.$message({showClose:!0,message:"新增用户成功！",type:"success"})):(e.data.status,t.$message({showClose:!0,message:e.data.data,type:"error"}))}).catch(function(e){})}})},handClick:function(e){this.addSh=!0,this.oldFormInline=e,this.customer_id=e.customer_id,this.sbw_id=e.id},confirmAdd:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({showClose:!0,message:"*项必填，请检查完善！！！",type:"error"}),!1;var a=new URLSearchParams;a.append("customer_data",r()(t.oldFormInline)),a.append("customer_id",t.customer_id),a.append("call_status",t.oldFormInline.customer_status),a.append("sbw_id",t.sbw_id),a.append("connect_remarks",t.oldFormInline.connect_remarks),a.append("session_key",t.session_key),t.$http({method:"post",url:"hr24/update_old_sale_base_work/",data:a}).then(function(e){1==e.data.status?(t.addSh=!1,t.listData(""==t.id?"不限":t.id,t.currentPage-1),t.$message({showClose:!0,message:"确认沟通成功！",type:"success"}),t.formInline={}):-5==e.data.status?t.$message({showClose:!0,message:"请选择沟通状态后再确认！",type:"error"}):t.$message({showClose:!0,message:"确认沟通用户失败，请刷新重试！",type:"error"})}).catch(function(e){console.log(e)})})},handleCurrentChange:function(e){this.currentPage=e,this.listData(""==this.id?"不限":this.id,this.currentPage-1)},prevClick:function(){this.listData(""==this.id?"不限":this.id,this.currentPage-2)},nextClick:function(){this.listData(""==this.id?"不限":this.id,this.currentPage)},listData:function(e,t){var a=this,l=new URLSearchParams;l.append("sale_id",e),l.append("page",t),l.append("call_status",this.radioPhone),l.append("session_key",this.session_key),l.append("date",this.timeNow),this.$http({method:"post",url:"hr24/sale_base_work_list/",data:l}).then(function(e){1==e.data.status?(a.loadingTable=!1,a.tableData=e.data.data.base_work_info_list,a.totalNmb=e.data.data.base_work_costomer_count,a.salePersonConut=e.data.data.sale_person_phone_count):a.$message({showClose:!0,message:"获取信息失败，请刷新重试！",type:"error"})}).catch(function(e){console.log(e)})},radioGrou:function(e){this.id=e,this.listData(e,0)},state:function(){this.listData(this.id,0)},SxTime:function(){this.timeNow=this.valueTime,this.listData(""==this.id?"不限":this.id,0)},handleSelectionChange:function(e){this.addName=e.length;var t=[],a=[];e.forEach(function(e){t.push(e.customer_id),a.push(e.id)}),this.customerId=t,this.sbwId=a},addCustomer:function(){var e=this;if(0!=this.customerId.length){var t=new URLSearchParams;t.append("customer_id",this.customerId),t.append("sbw_id",this.sbwId),t.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/sale_base_work_customer_to_sale_customer/",data:t}).then(function(t){1==t.data.status?(e.listData(void 0,e.currentPage-1),e.$message({showClose:!0,message:"添加至我的客户成功",type:"success"})):e.$message({showClose:!0,message:"添加至我的客户失败，请重新添加！",type:"error"})}).catch(function(e){console.log(e)})}else this.$message({showClose:!0,message:"请至少选择一项添加至我的客户",type:"error"})}},mounted:function(){var e=this,t=JSON.parse(sessionStorage.getItem("userInfo"));this.user_type=t.data.data.user_type,this.session_key=t.data.data.session_key;var a=new Date,l=a.getFullYear(),s=a.getMonth()+1;s=s<10?"0"+s:s;var n=a.getDate();n=n<10?"0"+n:n,this.timeNow=l+"-"+s+"-"+n;var r=new URLSearchParams;r.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/return_customer_dict/",data:r}).then(function(t){1==t.data.status?(e.formInline=t.data.data,e.oldFormInline=t.data.data):e.$message({showClose:!0,message:"获取信息失败，请刷新重试！",type:"error"})}).catch(function(e){}),this.listData(void 0,0),this.$http({method:"post",url:"hr24/return_sale_person_list/",data:r}).then(function(t){e.loading=!1,e.saleNamer=t.data.data.sale_person_list})}}),i=o,c=(a("38427"),a("2877")),m=Object(c["a"])(i,l,s,!1,null,"562d3336",null);t["default"]=m.exports}}]);