(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dbd75faa"],{"6cd2":function(t,e,a){"use strict";var n=a("8fee"),s=a.n(n);s.a},"8fee":function(t,e,a){},da95:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.saleShow?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"show1"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadddd,expression:"loadddd"}],staticClass:"transition-box tranBox",attrs:{"element-loading-text":"拼命加载中"}},[a("h3",{staticStyle:{"text-align":"center"}},[t._v("请选择需要查看合同的城市")]),t._l(t.bthCity,function(e,n){return a("div",{key:n,staticClass:"cityBix",on:{click:function(e){return t.bthCityOne(n)}}},[0!=e.count?a("el-badge",{staticClass:"item",attrs:{value:e.count,max:99}},[a("el-button",{staticClass:"cityBth",attrs:{type:"primary",size:"medium",loading:t.loading}},[t._v(t._s(e.name))])],1):a("el-button",{staticClass:"cityBth",attrs:{type:"primary",size:"medium",loading:t.loading}},[t._v(t._s(e.name))])],1)})],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show1,expression:"show1"}]},[t._m(0),a("el-button",{attrs:{type:"info"},on:{click:t.returnCity}},[a("i",{staticClass:"el-icon-refresh-left"}),t._v("返回重新选择城市\n    ")]),a("div",{staticStyle:{margin:"15px 0"}},[a("el-button",{attrs:{type:"danger",round:"",disabled:t.contYes},on:{click:t.confirmContractNo}},[t._v("未确认合同")]),a("el-button",{attrs:{type:"success",round:"",disabled:t.contNo},on:{click:t.confirmContractYes}},[t._v("已确认合同")])],1),a("el-table",{staticClass:"formBottom",staticStyle:{width:"100%",cursor:"pointer"},attrs:{data:t.contData,border:"","highlight-current-row":""},on:{"row-click":t.handClick}},[a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",align:"center"}}),a("el-table-column",{attrs:{prop:"customer__company_name",label:"公司名称",align:"center"}}),a("el-table-column",{attrs:{prop:"customer__contacts",label:"客户姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"opened_account",label:"开通帐号",align:"center"}}),a("el-table-column",{attrs:{prop:"deal_product",label:"合同套餐",align:"center"}}),a("el-table-column",{attrs:{prop:"money_back",label:"回款金额",align:"center"}}),a("el-table-column",{attrs:{prop:"contract_content",label:"合同备注",align:"center"}}),a("el-table-column",{attrs:{prop:"is_renew",label:"客户类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.is_renew?"新用户":"续费用户"))])]}}],null,!1,247869561)}),a("el-table-column",{attrs:{prop:"sale_person__user_name",label:"提单人员",align:"center"}}),a("el-table-column",{attrs:{prop:"sale_person__agent__agent_city",label:"提单城市",align:"center"}}),a("el-table-column",{attrs:{label:"确认时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(0==e.row.is_money_back?"未确认合同":e.row.update_time))])]}}],null,!1,3439636557)})],1),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"10px"},attrs:{"current-page":t.currentPage,"page-size":50,background:"",total:t.totalNmb,layout:"total, prev, pager, next"},on:{"current-change":t.handleCurrentChange,"prev-click":t.prevClick,"next-click":t.nextClick}}),a("el-dialog",{attrs:{title:"合同详情",visible:t.centerDialogVisible,width:"40%",center:"",top:"5vh"},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:"",model:t.contractData}},[a("el-form-item",{attrs:{label:"创建时间：",prop:"deal_product"}},[a("span",[t._v(t._s(t.contractData.create_time))])]),a("el-form-item",{attrs:{label:"公司名称：",prop:"money_back"}},[a("span",[t._v(t._s(t.contractData.customer__company_name))])]),a("el-form-item",{attrs:{label:"客户姓名：",prop:"opened_account"}},[a("span",[t._v(t._s(t.contractData.customer__contacts))])]),a("el-form-item",{attrs:{label:"开通帐号：",prop:"contract_content"}},[a("span",[t._v(t._s(t.contractData.opened_account))])]),a("el-form-item",{attrs:{label:"合同套餐：",prop:"deal_product"}},[a("span",[t._v(t._s(t.contractData.deal_product))])]),a("el-form-item",{attrs:{label:"回款金额：",prop:"money_back"}},[a("span",[t._v(t._s(t.contractData.money_back))])]),a("el-form-item",{attrs:{label:"合同备注：",prop:"opened_account"}},[a("span",[t._v(t._s(t.contractData.contract_content))])]),a("el-form-item",{attrs:{label:"客户类型：",prop:"contract_content"}},[a("span",[t._v(t._s(0==t.contractData.is_renew?"新用户":"续费用户"))])]),a("el-form-item",{attrs:{label:"提单人员：",prop:"opened_account"}},[a("span",[t._v(t._s(t.contractData.sale_person__user_name))])]),a("el-form-item",{attrs:{label:"提单城市：",prop:"contract_content"}},[a("span",[t._v(t._s(t.contractData.sale_person__agent__agent_city))])]),a("el-form-item",{attrs:{label:"确认时间：",prop:"contract_content"}},[a("span",[t._v(t._s(0==t.contractData.is_money_back?"未确认合同":t.contractData.update_time))])])],1),a("h3",[t._v("合同图片：")]),a("viewer",{attrs:{images:this.contractData.contract_img_url}},t._l(this.contractData.contract_img_url,function(t){return a("img",{key:t,attrs:{src:t,width:"150",height:"150px"}})}),0),a("h3",[t._v("回款图片：")]),a("viewer",{staticClass:"view",attrs:{images:this.contractData.money_back_img_url}},t._l(this.contractData.money_back_img_url,function(t){return a("img",{key:t,attrs:{src:t,width:"150",height:"150px"}})}),0),t.contNo?t._e():a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.confirmSure}},[t._v("确认合同")]),a("el-button",{attrs:{type:"danger"},on:{click:t.refuse}},[t._v("拒绝合同")])],1),a("el-dialog",{attrs:{width:"30%",title:"拒绝理由",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请必须输入拒绝理由"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.refuseData}},[t._v("拒绝合同并提交拒绝理由")])],1)],1)],1)],1)]):t._e()},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h4",[n("img",{staticStyle:{"margin-right":"10px"},attrs:{src:a("fc08")}}),t._v("合同管理\n    ")])}],o=(a("7f7f"),{data:function(){return{contData:[],bthCity:[],currentPage:1,totalNmb:1,textarea:"",centerDialogVisible:!1,innerVisible:!1,contractData:{},dealId:0,contNo:!1,contYes:!0,loading:!1,user_id:"",show:!0,saleShow:!0,show1:!1,loadddd:!1,city:""}},methods:{bthCityOne:function(t){this.loading=!0,this.confirmData(0,0,this.bthCity[t].name),this.city=this.bthCity[t].name},returnCity:function(){var t=this;this.show=!0,this.show1=!1;var e=new URLSearchParams;e.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/to_be_processed_deal/",data:e}).then(function(e){t.bthCity=e.data.data.count,-3==e.data.status&&t.$message({showClose:!0,message:e.data.data,type:"error"})})},handClick:function(t){var e=this;this.dealId=t.id;var a=new URLSearchParams;a.append("deal_id",t.id),a.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/get_deal_info/",data:a}).then(function(t){e.contractData=t.data.data.deal_info[0],e.centerDialogVisible=!0})},confirm:function(t,e){var a=this,n=new URLSearchParams;n.append("deal_id",this.dealId),n.append("is_success",t),n.append("session_key",this.session_key),n.append("check_remarks",e),this.$http({method:"post",url:"hr24/check_deal/",data:n}).then(function(t){1==t.data.status?(a.$message({showClose:!0,message:t.data.data,type:"success"}),a.confirmData(0,a.currentPage-1,a.city),a.textarea="",a.innerVisible=!1,a.centerDialogVisible=!1):-3==t.data.status&&a.$message({showClose:!0,message:t.data.data,type:"error"})})},confirmSure:function(){this.confirm(1)},confirmData:function(t,e,a){var n=this,s=new URLSearchParams;s.append("is_deal",t),s.append("page",e),s.append("filters",a),s.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/get_deal_list/",data:s}).then(function(t){n.loading=!1,n.contData=t.data.data.deal_list,n.totalNmb=t.data.data.deal_count,n.show=!1,n.show1=!0})},confirmContractYes:function(){this.confirmData(1,this.currentPage-1,this.city),this.contYes=!1,this.contNo=!0},confirmContractNo:function(){this.confirmData(0,this.currentPage-1,this.city),this.contYes=!0,this.contNo=!1},handleCurrentChange:function(t){this.confirmData(0,t,this.bthCity[index].name)},prevClick:function(){this.confirmData(0,this.currentPage-1,this.bthCity[index].name)},nextClick:function(){this.confirmData(0,this.currentPage,this.bthCity[index].name)},refuse:function(){this.innerVisible=!0},refuseData:function(){""==this.textarea?this.$message({showClose:!0,message:"必须填写拒绝理由否则不予提交！！！",type:"error"}):this.confirm(0,this.textarea)}},mounted:function(){var t=this,e=JSON.parse(sessionStorage.getItem("userInfo"));e.data.data.user_type;this.session_key=e.data.data.session_key;var a=new URLSearchParams;a.append("session_key",this.session_key),this.$http({method:"post",url:"hr24/to_be_processed_deal/",data:a}).then(function(e){t.bthCity=e.data.data.count,-3==e.data.status&&t.$message({showClose:!0,message:e.data.data,type:"error"})})},watch:{"$store.state.storer.count":function(){this.confirmData(0,this.currentPage-1,this.city)}}}),i=o,r=(a("6cd2"),a("2877")),c=Object(r["a"])(i,n,s,!1,null,"23cb00d7",null);e["default"]=c.exports},fc08:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACH0lEQVRYR+2XMVobMRCF/0lLEW4QuIFp0wTfAE6AOQHIVcpQplnBCTAnYG+ACw5AThBzgpiKjsk32l2y3mi1i+3gfB+oHklPb957koQND9nw/iwA0IwJwtEaQd2JYy+13iIAjzaKz6KTlRHCpz5AxS0esjknCaBtsmZMEb68A3gbDKhnB/DANnAsjtmraQCYAAfl5hXj58BpH/qtZiUX9N0k6fNVbLhZAMoFwjwJQtlGOHmuUR5C24QcmAE74pguk4Qzcez2YUAzZiEVlR8IByZSm6ee/a7Ng0bqm+hiFJsAw2KJYQ4ZYScXBqVYzTH7tTnGgBPHXWyddgDKfQeAAcLHctEzcXxL2LP1UooDUO5lHPzfOtSHXPhVFlTt+pmYslu1p16TYsD8nxKhMWCZELxuPQduEgCGMU10Xcd9dFgBMMZSDOzFdJACcPgXA8U7IPZgORRH/uyIJuxES9sARG2oPsTydYSWqTiG6hnwxC0f2ApPG1tdeUT4/HIXFBZs2rCyWqw1ZrVz9eGeMCsWQ/kuY7629XJ1DVgAGVAhF8dEPSPgsrZhsOi/AmDXswVWcdjCCdYis2g1zEmmkWgkL8+AciVjRqUuTJjmAmtR27AktJZemWCrouUBFKfKG/Hd27brA5Axr0VyNwDlQcZ/WrQKA5XqjfpkbDdQzeuWbP6Mer/3gRCtmpG/iIEiuofRFnTzt/6K/+tzuv7zda/4G/QD5CGqHG9UAAAAAElFTkSuQmCC"}}]);